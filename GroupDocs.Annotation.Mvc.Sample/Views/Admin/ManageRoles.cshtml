@model GroupDocs.Annotation.Mvc.Sample.Models.RolePermissionModel
@{
    ViewBag.Title = "Roles";
    Layout = "~/Views/Admin/AdminLayout.cshtml";
}

<!DOCTYPE html>

<html>
<head>
    <title>Roles</title>
</head>
<body>
<nav class="navbar navbar-default">
    <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
            <li>
                <h2>Roles</h2>
            </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li>
                <a href="@Url.Action("Index", "Annotation")">Back to the main page</a>
            </li>
        </ul>
    </div>
</nav>
@if (!Model.Roles.Any())
{
    <div class="row">
        <div class="col-md-3">There no roles in the storage</div>
    </div>
}

@foreach (var role in Model.Roles)
{
    using (Html.BeginForm("AddRolePermission", "Admin", new {roleName = role.Key.Name}, FormMethod.Post, new {@class = "form-horizontal"}))
    {
        <div class="input-group col-sm-offset-1">
            <div class="col-md-5">
                <div class="form-group">
                    <label for="Id">Name:</label>
                    <input type="text" name="Id" id="Id" value="@role.Key.Name" readonly/>
                </div>
            </div>
        </div>

        <div class="input-group col-sm-offset-1">
            <div class="col-md-5">
                <div class="form-group">
                    <label>Permissions:</label>
                    @if (role.Key.Permissions.Any())
                    {
                        foreach (var permission in role.Key.Permissions)
                        {
                            <div class="input-group col-md-6" style="width: 300px">
                                <input type="text" class="form-control" value="@permission">
                                <span class="input-group-btn">
                                        <button class="btn btn-default" type="button" onclick="location.href = '@Url.Action("DeleteRolePermission", "Admin", new {roleName = @role.Key.Name, deletedPermission = permission})' "><span class=" glyphicon glyphicon-remove"> </span></button>
                                    </span>
                            </div>
                        }
                    }
                    else
                    {
                        <input type="text" name="Permission" id="Permission" value="Role doesnt contain permissions" readonly/>
                    }
                </div>
            </div>
        </div>


        <div class="input-group col-sm-offset-1">
            <div class="col-md-5">
                <div class="form-group">
                    <label for="newPermission">Add:</label>
                    <select class="form-control" name="newPermission" id="newPermission" style="width: 300px">
                        @foreach (var permission in Model.Roles[role.Key])
                        {
                            <option value=@permission>
                                @permission
                            </option>
                        }
                    </select>
                </div>
            </div>
        </div>
        <div class="input-group col-sm-offset-1">
            <span class="input-group-btn">
                    <button class="btn btn-primary" type="submit" style="margin-top: 5px; width: 300px;">Save</button>
                </span>
        </div>
    }
    using (Html.BeginForm("DeleteRole", "Admin", new {role = role.Key.Name}, FormMethod.Post, new {@class = "form-horizontal"}))
    {
        <div class="input-group col-sm-offset-1">
            <span class="input-group-btn">
                    <button class="btn btn-primary" type="submit" style="margin-bottom: 20px; margin-top: 5px; width: 300px;">Delete</button>
                </span>
        </div>
    }

    <hr/>
}
@using (Html.BeginForm("CreateRole", "Admin", FormMethod.Post, new {@class = "form-horizontal"}))
{
    <nav class="navbar navbar-default">
        <h2>Create new role</h2>
    </nav>
    <div class="input-group col-sm-offset-1">
        <div class="col-md-5">
            <div class="form-group">
                <label for="Name" class="col-sm-2 control-label">Name:</label>
                <div class="col-sm-10">
                    <input type="text" name="Name" id="Name" value=""/>
                </div>
            </div>
        </div>
    </div>
    <div class="input-group col-sm-offset-1">
        <span class="input-group-btn col-md-5">
                <button class="btn btn-primary" type="submit" style="margin-top: 5px; width: 300px;">Create</button>
            </span>
    </div>
    <br>
}
</body>
</html>